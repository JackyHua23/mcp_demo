<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå›å¤åˆ†ç¦»æ¼”ç¤º - FFmpeg MCP</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .demo-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .demo-message {
            margin-bottom: 30px;
        }
        .demo-controls {
            text-align: center;
            margin: 30px 0;
        }
        .demo-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 0 10px;
            font-size: 1rem;
            transition: background-color 0.2s;
        }
        .demo-btn:hover {
            background: #5a67d8;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-video"></i> AIå›å¤åˆ†ç¦»æ¼”ç¤º</h1>
                <p>å±•ç¤ºæ€è€ƒè¿‡ç¨‹å’Œç»“æœåˆ†ç¦»çš„æ•ˆæœ</p>
            </div>
        </header>

        <div class="demo-container">
            <div class="demo-controls">
                <button class="demo-btn" onclick="simulateAudioExtraction()">
                    <i class="fas fa-play"></i> æ¨¡æ‹ŸéŸ³é¢‘æå–è¯·æ±‚
                </button>
                <button class="demo-btn" onclick="simulateVideoInfo()">
                    <i class="fas fa-info-circle"></i> æ¨¡æ‹Ÿè§†é¢‘ä¿¡æ¯æŸ¥è¯¢
                </button>
                <button class="demo-btn" onclick="clearDemo()">
                    <i class="fas fa-trash"></i> æ¸…ç©ºæ¼”ç¤º
                </button>
            </div>

            <div class="chat-messages" id="demoMessages">
                <div class="message assistant">
                    <div class="message-content">
                        <i class="fas fa-robot"></i>
                        <div class="text">
                            <div class="markdown-content">
                                <h2>ğŸ‰ æ¬¢è¿ä½¿ç”¨AIå›å¤åˆ†ç¦»æ¼”ç¤º</h2>
                                <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹å…¨æ–°çš„AIå›å¤ä½“éªŒï¼</p>
                                
                                <h3>âœ¨ æ–°åŠŸèƒ½ç‰¹ç‚¹</h3>
                                <ul>
                                    <li>ğŸ§  **æ€è€ƒè¿‡ç¨‹**ï¼šå®æ—¶æ˜¾ç¤ºAIçš„åˆ†æå’Œå·¥å…·è°ƒç”¨è¿‡ç¨‹</li>
                                    <li>âœ… **å¤„ç†ç»“æœ**ï¼šä»¥ç²¾ç¾çš„Markdownæ ¼å¼å±•ç¤ºæœ€ç»ˆç»“æœ</li>
                                    <li>ğŸ”„ **å¯æŠ˜å è®¾è®¡**ï¼šæ€è€ƒè¿‡ç¨‹å¯ä»¥æŠ˜å /å±•å¼€ï¼ŒèŠ‚çœç©ºé—´</li>
                                    <li>ğŸ“± **å“åº”å¼å¸ƒå±€**ï¼šå®Œç¾é€‚é…å„ç§è®¾å¤‡å°ºå¯¸</li>
                                    <li>ğŸ¨ **ç¾åŒ–ç•Œé¢**ï¼šç°ä»£åŒ–çš„æ¸å˜è‰²å½©å’ŒåŠ¨ç”»æ•ˆæœ</li>
                                    <li>âš¡ **æµå¼æ›´æ–°**ï¼šå†…å®¹å®æ—¶æµå¼æ˜¾ç¤ºï¼Œä½“éªŒæ›´æµç•…</li>
                                </ul>
                                
                                <h3>ğŸš€ æ”¹è¿›äº®ç‚¹</h3>
                                <blockquote>
                                å·²ç§»é™¤æ‰€æœ‰ `&lt;think&gt;` æ ‡ç­¾ï¼Œä¼˜åŒ–äº†Markdownæ¸²æŸ“å™¨ï¼Œæ”¯æŒæ›´å¤šè¯­æ³•å…ƒç´ ï¼Œç•Œé¢æ›´åŠ ç°ä»£åŒ–å’Œç”¨æˆ·å‹å¥½ã€‚
                                </blockquote>
                                
                                <p>ç°åœ¨å°±å¼€å§‹ä½“éªŒå§ï¼ ğŸ‘†</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messageCounter = 0;

        function simulateAudioExtraction() {
            const messageId = 'demo-' + (++messageCounter);
            addDemoMessage('ä» kinefey_tutorial.mp4 æå–éŸ³é¢‘ä¸ºaacæ ¼å¼', 'user');
            
            // æ·»åŠ AIå›å¤æ¶ˆæ¯
            addStreamMessage('æ­£åœ¨å¤„ç†...', 'assistant', messageId);
            
            // æ¨¡æ‹Ÿæ€è€ƒè¿‡ç¨‹
            setTimeout(() => updateThinkingProcess('ğŸš€ å¼€å§‹å¤„ç†æ‚¨çš„è¯·æ±‚...', messageId), 500);
            setTimeout(() => updateThinkingProcess('ğŸ” æ­£åœ¨åˆ†ææ‚¨çš„è¯·æ±‚...', messageId), 1000);
            setTimeout(() => updateThinkingProcess('ğŸ¤– æ­£åœ¨è°ƒç”¨AIåŠ©æ‰‹åˆ†æè¯·æ±‚...', messageId), 1500);
            setTimeout(() => updateThinkingProcess('âš™ï¸ æ­£åœ¨æ‰§è¡ŒFFmpegå·¥å…·è°ƒç”¨...', messageId), 2000);
            setTimeout(() => updateThinkingProcess('âœ… å¤„ç†å®Œæˆï¼Œæ­£åœ¨æ•´ç†ç»“æœ...', messageId), 2500);
            
            // å¼€å§‹æ˜¾ç¤ºç»“æœ
            setTimeout(() => createResultSection(messageId), 3000);
            
            // æ¨¡æ‹Ÿç»“æœå†…å®¹é€æ­¥æ˜¾ç¤º
            const resultContent = `## éŸ³é¢‘æå–å®Œæˆ

æˆ‘å·²ç»æˆåŠŸè°ƒç”¨äº† **extract_audio_from_video** å·¥å…·æ¥å®Œæˆæ‚¨çš„è¯·æ±‚ã€‚

### æ‰§è¡Œè¯¦æƒ…

- **è¾“å…¥æ–‡ä»¶**: \`/Users/jacky/Project/hackathon/mcp_demo/uploads/kinefey_tutorial.mp4\`
- **è¾“å‡ºæ ¼å¼**: \`aac\`
- **è¾“å‡ºæ–‡ä»¶**: \`/Users/jacky/Project/hackathon/mcp_demo/outputs/kinefey_tutorial.aac\`

### FFmpegå‘½ä»¤

\`\`\`bash
ffmpeg -i "/Users/jacky/Project/hackathon/mcp_demo/uploads/kinefey_tutorial.mp4" -vn -acodec copy "/Users/jacky/Project/hackathon/mcp_demo/outputs/kinefey_tutorial.aac"
\`\`\`

### å¤„ç†ç»“æœ

âœ… **æˆåŠŸ**: éŸ³é¢‘æå–å®Œæˆ
ğŸ“ **è¾“å‡ºä½ç½®**: outputsç›®å½•
ğŸµ **éŸ³é¢‘æ ¼å¼**: AAC (LC), 48000 Hz, ç«‹ä½“å£°

ç”±äºåŸå§‹è§†é¢‘çš„éŸ³é¢‘æµå·²ç»æ˜¯aacç¼–ç ï¼Œä½¿ç”¨äº† \`-acodec copy\` å‚æ•°ç›´æ¥å¤åˆ¶éŸ³é¢‘æµï¼Œå¤„ç†é€Ÿåº¦å¾ˆå¿«ä¸”ä¿æŒäº†åŸå§‹è´¨é‡ã€‚`;

            const sentences = resultContent.split('\n\n');
            sentences.forEach((sentence, index) => {
                setTimeout(() => {
                    appendResultContent(sentence + '\n\n', messageId);
                }, 3500 + index * 800);
            });
            
            // å®Œæˆå¤„ç†
            setTimeout(() => finalizeMessage(messageId), 3500 + sentences.length * 800);
        }

        function simulateVideoInfo() {
            const messageId = 'demo-' + (++messageCounter);
            addDemoMessage('è·å– sample_video.mp4 çš„è¯¦ç»†ä¿¡æ¯', 'user');
            
            addStreamMessage('æ­£åœ¨å¤„ç†...', 'assistant', messageId);
            
            setTimeout(() => updateThinkingProcess('ğŸ” æ­£åœ¨æŸ¥æ‰¾è§†é¢‘æ–‡ä»¶...', messageId), 500);
            setTimeout(() => updateThinkingProcess('ğŸ“Š æ­£åœ¨è·å–è§†é¢‘ä¿¡æ¯...', messageId), 1000);
            setTimeout(() => updateThinkingProcess('âš™ï¸ è°ƒç”¨ get_video_info å·¥å…·...', messageId), 1500);
            setTimeout(() => updateThinkingProcess('âœ… ä¿¡æ¯è·å–å®Œæˆ', messageId), 2000);
            
            setTimeout(() => createResultSection(messageId), 2500);
            
            const resultContent = `# è§†é¢‘ä¿¡æ¯æŠ¥å‘Š

## åŸºæœ¬ä¿¡æ¯
- **æ–‡ä»¶å**: sample_video.mp4
- **æ–‡ä»¶å¤§å°**: 15.2 MB
- **æ—¶é•¿**: 00:02:30

## è§†é¢‘æµä¿¡æ¯
- **ç¼–ç æ ¼å¼**: H.264 (AVC)
- **åˆ†è¾¨ç‡**: 1920x1080 (Full HD)
- **å¸§ç‡**: 30 fps
- **æ¯”ç‰¹ç‡**: 8000 kbps

## éŸ³é¢‘æµä¿¡æ¯
- **ç¼–ç æ ¼å¼**: AAC (LC)
- **é‡‡æ ·ç‡**: 48000 Hz
- **å£°é“**: ç«‹ä½“å£° (2 channels)
- **æ¯”ç‰¹ç‡**: 128 kbps

## æŠ€æœ¯è¯¦æƒ…
\`\`\`
Container: MP4
Video Codec: libx264
Audio Codec: aac
Color Space: yuv420p
\`\`\`

*ä¿¡æ¯è·å–å®Œæˆï¼Œæ‚¨å¯ä»¥åŸºäºè¿™äº›ä¿¡æ¯è¿›è¡Œåç»­çš„è§†é¢‘å¤„ç†æ“ä½œã€‚*`;

            const sentences = resultContent.split('\n\n');
            sentences.forEach((sentence, index) => {
                setTimeout(() => {
                    appendResultContent(sentence + '\n\n', messageId);
                }, 3000 + index * 600);
            });
            
            setTimeout(() => finalizeMessage(messageId), 3000 + sentences.length * 600);
        }

        function addDemoMessage(content, type) {
            const chatMessages = document.getElementById('demoMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const icon = type === 'user' ? 'fas fa-user' : 'fas fa-robot';
            
            messageDiv.innerHTML = `
                <div class="message-content">
                    <i class="${icon}"></i>
                    <div class="text">
                        <p>${content}</p>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function clearDemo() {
            const chatMessages = document.getElementById('demoMessages');
            const messages = chatMessages.querySelectorAll('.message');
            messages.forEach((message, index) => {
                if (index > 0) { // ä¿ç•™ç¬¬ä¸€æ¡æ¬¢è¿æ¶ˆæ¯
                    message.remove();
                }
            });
            messageCounter = 0;
        }

        // æ¼”ç¤ºé¡µé¢ä¸éœ€è¦é¢å¤–çš„å‡½æ•°å®šä¹‰ï¼Œå› ä¸ºä¼šåŠ è½½ script.js
    </script>
    <script src="/static/script.js"></script>
</body>
</html> 